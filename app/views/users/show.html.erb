<div class="grid grid-cols-3 gap-4">
  <div class="col-span-1">
    <div class='p-4 border rounded border-gray-400'>
      <p>Name: <%= @user.name %></p>
      <p>Email: <%= @user.email %></p>
      <% if @user.id == current_user.id %>
        <div class="mt-4">
          <%= link_to 'Edit profile', edit_user_registration_path, class: warning_btn_style %>
        </div>
      <% end %>
    </div>

    <% if @user.id == current_user.id %>
      <% if !@user.invitations.empty? %>
        <%= turbo_frame_tag 'invitation-list' do %>
          <div class='my-10'>
            <h3 class='pl-2 mb-2 text-lg text-green-500 border-l-4'><%= pluralize(@user.invitations.count, 'Partner Request') %></h3>
            <ul>
              <% @user.invitations.each do |invitation| %>
                <li>
                  <span class='pl-2 pr-4'><%= invitation.name %></span>
                  <%= link_to 'Accept',
                      accept_request_path(partner_id: invitation.id),
                      data: { "turbo-method": :put },
                      class: primary_btn_style %>
                  <%= link_to 'Delete',
                      remove_partner_path(partner_id: invitation.id),
                      data: { "turbo-method": :delete },
                      class: danger_btn_style %>
                </li>
              <% end %>
            </ul>
          </div>
        <% end %>
      <% end %>

      <% if !@user.partners.empty? %>
        <h3>Your partners</h3>
        <ul>
          <% @user.partners.each do |partner| %>
            <li>
              <span><%= partner.name %></span>
              <%= link_to 'Remove',
                  remove_partner_path(partner_id: partner.id),
                  data: { "turbo-method": :delete },
                  class: danger_btn_style %>
            </li>
          <% end %>
        </ul>
      <% end %>

    <% else %>
      <div class="mt-4">
        <% if !Partnership.reacted?(current_user.id, @user.id) %>
          <%= link_to 'Partner request', request_path(partner: @user), class: primary_btn_style %>
        <% else %>
          <p>You are reqesting a partnership to this user.</p>
        <% end %>
      </div>
    <% end %>
  </div>

  <div class="p-2 col-span-2">
    <h2 class='ml-4 mb-4 border-b-2'><%= @user.name %>'s Posts</h2>
    <% @user.posts.each do |post| %>
      <%= render partial: post %>
    <% end %>
  </div>
</div>
